{% extends "layout.html" %}
{% block body %}
<script type="text/javascript">
        function getFileData(myFile){
            var files = myFile.files;
            var fTableBody = document.getElementById('fileTableBody');
            for(let i = 0; i < files.length; i++){
                var filename = files[i].name;
                var size = files[i].size/1000;
                if(size > 1000.0){
                    size = (size/1000).toFixed(2) + ' MB';
                } else {
                    size = (size).toFixed(2) + ' KB';
                }
                fTableBody.innerHTML += '<tr><td>'+ filename +'</td><td>' + size +'</td></tr>';
            }
        }
        var colors = ["#00F", "#0F0", "#F00", "#F0F"];
        var css = document.createElement("style");
        css.type = "text/css";
        var colorIndex = 0;
        function changeColors(){
            colorIndex = (colorIndex+1)%colors.length;
            var nextColor = colors[colorIndex];
            css.innerHTML = "th,td{border-bottom-color:" + nextColor + ";}";
            css.innerHTML += "th{color:" + nextColor + ";}";
            css.innerHTML += "#ninja-scroll-hd{color:"+nextColor+";}";
            document.body.appendChild(css);
        }
        var currentNumber = 1;
        function progressiveRandomNumber(){
            if(currentNumber > 2000)
                    currentNumber = 1;
            currentNumber += currentNumber/(Math.sqrt(currentNumber)) + currentNumber/8;
            console.log(currentNumber);
            return currentNumber;
        }
        (function randomizeChangeColor(){
            var randomTime = progressiveRandomNumber();
            setTimeout( function() {
                changeColors();
                randomizeChangeColor();
            }, randomTime);
        }());
        randomizeChangeColor();
</script>
<style>
    input[type="file"] {
        display: none;
    }
    .custom-file-upload {
        cursor: pointer;
    }
</style>
<div class="container">
    <div class="row">
        <h1 id="ninja-scroll-hd" style="font-family:NjNaruto">Ninja Scroll Delivery Service</h1>
    </div>
    <div class="row .text-center">
{#        <img src="{{ url_for('static', filename='img/shuriken.png') }}" alt="shuriken-px-art">#}
    </div>
    <form action="" method=post enctype=multipart/form-data>
        <div class="row">
            <label style="font-family:NjNaruto">Ninja clan sign</label>
        </div>
        <div class="row">
            <input class="u-full-width" type="password" name="password" id="pass">
        </div>
        <br>
        <div class="row">
            <div class="six columns">
                <label class="custom-file-upload button button-primary u-full-width">
                    <input type="file" id="fileInput" name="file[]" onchange="getFileData(this);" multiple>
                     Add files
                </label>
            </div>
            <div class="six columns">
                <input class="button-primary u-full-width" type=submit value=Upload>
            </div>
        </div>
    </form>
    <div class="row">
        <ul id="fileList">
            <table id="fileTable" class="u-full-width">
                <thead>
                    <tr>
                        <th>File Name</th>
                        <th>Size</th>
                    </tr>
                </thead>
                <tbody id="fileTableBody">

                </tbody>
            </table>
        </ul>
    </div>
</div>
{% endblock %}